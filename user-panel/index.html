<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Raman Vada Pav</title>
    <!-- CSS and Fonts (No changes here) -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@700&family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">
    <style>
        /* All your existing CSS goes here. No changes. */
        :root { --primary: #e23744; --secondary: #ff9f43; /* ... and so on */ }
        * { margin: 0; padding: 0; box-sizing: border-box; font-family: 'Poppins', sans-serif; }
        body { background-color: #f4f4f4; color: var(--dark); padding-bottom: 70px; padding-top: 60px; }
        /* Paste ALL your existing CSS styles here */
    </style>
</head>
<body>
    <!-- All your existing HTML Body content goes here. No changes. -->
    <header>
        <div class="logo" id="shopLogo"><img src="" class="logo-img"><div class="shop-name">Raman Vada Pav</div></div>
    </header>
    <div class="container">
        <!-- All pages here -->
        <section id="menuPage" class="page active"><h2 class="section-title">Our Menu</h2><div class="food-grid"></div></section>
        <section id="ordersPage" class="page"><h2 class="section-title">My Orders</h2><div class="orders-list"></div></section>
        <section id="cartPage" class="page"><!-- ... your cart html ... --></section>
        <section id="profilePage" class="page"><!-- ... your profile html ... --></section>
        <!-- ... and all other sections ... -->
    </div>
    <nav><!-- ... your nav html ... --></nav>

    <!-- ========= START: FIREBASE INTEGRATION ========= -->
    
    <!-- Firebase Libraries -->
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-database.js"></script>
    
    <script>
      // 1. PASTE YOUR FIREBASE CONFIG OBJECT HERE
      const firebaseConfig = {
        apiKey: "AIzaSyD1QEf2wmpnNH6JMeDQpKoExWlaJzM4VYs",
    authDomain: "my-shope-raman.firebaseapp.com",
    projectId: "my-shope-raman",
    storageBucket: "my-shope-raman.firebasestorage.app",
    messagingSenderId: "1058019322311",
    appId: "1:1058019322311:web:240c7eeba4be628bc911e2"
  };

      // Initialize Firebase
      firebase.initializeApp(firebaseConfig);
      const database = firebase.database();
    </script>

    <!-- ========= END: FIREBASE INTEGRATION ========= -->


    <!-- ========= START: NEW JAVASCRIPT LOGIC ========= -->
    <script>
        // --- Global Variables ---
        let menuItems = [];
        let orders = [];
        let cart = JSON.parse(localStorage.getItem('cart')) || []; // Cart stays in localStorage for simplicity
        let userProfile = {};
        let shopInfo = {};
        const statuses = ["Placed", "Accepted", "Preparing", "On its way", "Delivered"];

        // --- UI Functions ---
        const showPage=pageId=>{document.querySelectorAll('.page').forEach(p=>p.classList.remove('active'));document.getElementById(pageId).classList.add('active');document.querySelectorAll('.nav-item').forEach(n=>n.classList.toggle('active',n.dataset.page===pageId));if(pageId==='cartPage')updateCartPage();};
        const getInitials = (name = '?') => (name.match(/\b\w/g) || []).slice(0, 2).join('').toUpperCase();
        
        // --- Firebase Real-time Listeners ---
        database.ref('menuItems').on('value', snapshot => {
            const data = snapshot.val();
            menuItems = data ? Object.values(data).filter(item => item && item.available) : [];
            renderMenu();
        });

        database.ref('shopInfo').on('value', snapshot => {
            shopInfo = snapshot.val() || {};
            document.querySelector('.shop-name').textContent = shopInfo.name || "Raman Vada Pav";
            document.querySelector('.logo-img').src = shopInfo.logoCircle || "";
            // Add more shop details rendering here if you need
        });
        
        // --- Render Functions ---
        const renderMenu = () => {
            const foodGrid = document.querySelector('.food-grid');
            if(!foodGrid) return;
            foodGrid.innerHTML = menuItems.map(i => `<div class="food-card"><img src="${i.image}" class="food-img"><div class="food-info"><h3 class="food-title">${i.name}</h3><p class="food-desc">${i.desc}</p><div class="food-footer"><div class="food-price">â‚¹${i.price}</div><button class="add-btn" onclick="addToCart(${i.id})">+</button></div></div></div>`).join('');
        };
        
        // All other functions like saveProfile, loadProfile, addToCart, confirmOrder etc.
        // need to be here, modified to use Firebase.
        // For simplicity, I am providing a compact version of the logic.
        // Please replace the script in your user panel with this.

        const addToCart=id=>{const i=cart.find(c=>c.id===id);const m=menuItems.find(x=>x.id===id);if(!m)return;if(i)i.quantity++;else cart.push({...m,quantity:1});updateCartCount();localStorage.setItem('cart',JSON.stringify(cart))};
        const updateCartCount=()=>{document.querySelectorAll('.cart-count').forEach(e=>e.textContent=cart.reduce((s,i)=>s+i.quantity,0))};
        const confirmOrder=()=>{if(!cart.length){alert('Cart empty');return}if(!userProfile.name){alert('Please save profile');showPage('profilePage');return} const sub=cart.reduce((s,i)=>s+(i.price*i.quantity),0);const orderId=`ORD${Date.now()}`;const newOrder={id:orderId,date:new Date().toLocaleDateString('en-IN'),status:0,items:[...cart],total:sub+(sub>0?30:0),customerName:userProfile.name,customerAddress:userProfile.address};database.ref('orders/'+orderId).set(newOrder).then(()=>{alert("Order Placed!");cart=[];localStorage.removeItem('cart');updateCartCount();showPage('ordersPage')})};

        // --- Initial Load ---
        document.addEventListener('DOMContentLoaded', () => {
             updateCartCount();
             // All event listeners and initial calls
             document.querySelectorAll('.nav-item').forEach(i=>i.addEventListener('click',e=>{e.preventDefault();showPage(i.dataset.page)}));
             // Other initialization code...
        });
    </script>
    <!-- ========= END: NEW JAVASCRIPT LOGIC ========= -->
</body>
</html>
