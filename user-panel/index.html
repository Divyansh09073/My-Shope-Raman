<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Raman Vada Pav</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">
    <style>
        :root{--primary:#e23744;--secondary:#ff9f43;--light:#f9f9f9;--dark:#333;--gray:#777;--bg-light:#f4f7f9;--border-color:#e8e8e8}
        *{margin:0;padding:0;box-sizing:border-box;font-family:'Poppins',sans-serif}
        body{background-color:var(--bg-light);padding-top:75px;padding-bottom:70px}
        header{position:fixed;top:0;left:0;width:100%;background:white;padding:15px;display:flex;align-items:center;gap:15px;z-index:100;box-shadow:0 2px 10px rgba(0,0,0,.08)}
        .logo-img{width:45px;height:45px;border-radius:50%;object-fit:cover;border:2px solid var(--border-color)}
        .shop-name{font-size:1.4rem;font-weight:700;color:var(--primary)}
        .container{padding:15px}
        .page{display:none}.page.active{display:block;animation:fadeIn .4s}
        @keyframes fadeIn{from{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}
        .section-title{font-size:1.5rem;font-weight:600;margin-bottom:20px}
        .food-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(280px,1fr));gap:20px}
        .food-card{background:white;border-radius:12px;box-shadow:0 4px 15px rgba(0,0,0,.05);overflow:hidden;display:flex;flex-direction:column}
        .food-img{width:100%;height:180px;object-fit:cover}
        .food-info{padding:15px;flex-grow:1;display:flex;flex-direction:column}
        .food-title{font-size:1.1rem;font-weight:600}.food-desc{font-size:.9rem;color:var(--gray);margin:5px 0;flex-grow:1}
        .food-footer{display:flex;justify-content:space-between;align-items:center;margin-top:10px}
        .food-price{font-size:1.2rem;font-weight:700;color:var(--primary)}
        .add-btn{background:var(--primary);color:white;border:none;width:40px;height:40px;border-radius:50%;font-size:1.5rem;cursor:pointer}
        nav{position:fixed;bottom:0;left:0;width:100%;background:white;box-shadow:0 -2px 10px rgba(0,0,0,.08);display:flex;justify-content:space-around;padding:10px 0}
        .nav-item{text-decoration:none;color:var(--gray);text-align:center;position:relative}
        .nav-item.active{color:var(--primary)}.nav-item i{font-size:1.5rem}.nav-item p{font-size:.8rem}
        .cart-count{position:absolute;top:-5px;right:-10px;background:var(--secondary);color:white;width:20px;height:20px;border-radius:50%;font-size:.8rem;display:flex;justify-content:center;align-items:center;font-weight:600}
        .card{background:white;padding:20px;border-radius:12px;margin-bottom:15px}
        .form-group{margin-bottom:15px}
        .form-group label{display:block;font-weight:600;margin-bottom:5px}
        .form-group input{width:100%;padding:10px;border-radius:8px;border:1px solid var(--border-color)}
        .btn{width:100%;padding:12px;border:none;border-radius:8px;background:var(--primary);color:white;font-size:1rem;font-weight:600;cursor:pointer}
    </style>
</head>
<body>
    <header>
        <img src="" class="logo-img" id="shopLogoImg">
        <div class="shop-name" id="shopName">Loading...</div>
    </header>
    <div class="container">
        <section id="menuPage" class="page active"><h2 class="section-title">Our Menu</h2><div class="food-grid"></div></section>
        <section id="ordersPage" class="page"><h2 class="section-title">My Orders</h2><div class="orders-list"></div></section>
        <section id="cartPage" class="page"><h2 class="section-title">My Cart</h2><div id="cartContent"></div></section>
        <section id="profilePage" class="page"><h2 class="section-title">My Profile</h2><div id="profileContent"></div></section>
    </div>
    <nav>
        <a href="#" class="nav-item active" data-page="menuPage"><i class="fas fa-utensils"></i><p>Menu</p></a>
        <a href="#" class="nav-item" data-page="ordersPage"><i class="fas fa-receipt"></i><p>Orders</p></a>
        <a href="#" class="nav-item" data-page="cartPage"><i class="fas fa-shopping-cart"></i><p>Cart</p><div class="cart-count">0</div></a>
        <a href="#" class="nav-item" data-page="profilePage"><i class="fas fa-user"></i><p>Profile</p></a>
    </nav>

    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-database.js"></script>
    
    <script>
      const firebaseConfig = {
          apiKey: "AIzaSyD1QEf2wmpnNH6JMeDQpKoExWlaJzM4VYs",
          authDomain: "my-shope-raman.firebaseapp.com",
          databaseURL: "https://my-shope-raman-default-rtdb.asia-southeast1.firebasedatabase.app",
          projectId: "my-shope-raman",
          storageBucket: "my-shope-raman.appspot.com",
          messagingSenderId: "1058019322311",
          appId: "1:1058019322311:web:240c7eeba4be628bc911e2"
      };
      firebase.initializeApp(firebaseConfig);
      const database = firebase.database();
    </script>
    
    <script>
        let menuItems=[], orders=[], cart=JSON.parse(localStorage.getItem('cart'))||[], userProfile={};
        const showPage=p=>{document.querySelectorAll('.page').forEach(e=>e.classList.remove('active'));document.getElementById(p).classList.add('active');document.querySelectorAll('.nav-item').forEach(e=>e.classList.toggle('active',e.dataset.page===p));if(p==='cartPage')renderCartPage();if(p==='profilePage')renderProfilePage();if(p==='ordersPage')renderOrdersPage()};
        
        database.ref('menuItems').on('value',s=>{const d=s.val();menuItems=d?Object.values(d).filter(i=>i&&i.available):[];renderMenu()});
        database.ref('shopInfo').on('value',s=>{const d=s.val()||{};document.getElementById('shopName').textContent=d.name||'Shop Name';document.getElementById('shopLogoImg').src=d.logoCircle||''});
        database.ref('userProfile').on('value',s=>{userProfile=s.val()||{}});
        database.ref('orders').on('value',s=>{const d=s.val();orders=d?Object.values(d):[]});

        const renderMenu=()=>{const g=document.querySelector('#menuPage .food-grid');if(!g)return;g.innerHTML=menuItems.map(i=>`<div class="food-card"><img src="${i.image}" class="food-img"><div class="food-info"><h3 class="food-title">${i.name}</h3><p class="food-desc">${i.desc}</p><div class="food-footer"><div class="food-price">₹${i.price}</div><button class="add-btn" onclick="addToCart(${i.id})">+</button></div></div></div>`).join('')||'<p>No items available right now.</p>'};
        const renderProfilePage=()=>{const c=document.getElementById('profileContent');if(!c)return;c.innerHTML=`<div class="card"><div class="form-group"><label>Name</label><input type="text" id="profileName" value="${userProfile.name||''}" placeholder="Enter your full name"></div><div class="form-group"><label>Mobile</label><input type="tel" id="profileMobile" value="${userProfile.mobile||''}" placeholder="Enter your mobile number"></div><div class="form-group"><label>Address</label><input type="text" id="profileAddress" value="${userProfile.address||''}" placeholder="Enter your full address"></div><button class="btn" onclick="saveProfile()">Save Profile</button></div>`};
        const renderOrdersPage=()=>{const o=document.querySelector('#ordersPage .orders-list');if(!o)return;const s=["Placed","Accepted","Preparing","On its way","Delivered"];o.innerHTML=orders.length?orders.sort((a,b)=>b.id.localeCompare(a.id)).map(d=>`<div class="card"><b>Order #${d.id.slice(-6)}</b><p style="margin:5px 0;">${d.items.map(i=>`${i.quantity}x ${i.name}`).join(', ')}</p><p><b>Status: ${s[d.status]}</b></p></div>`).join(''):'<p>You have no orders yet.</p>'};
        const renderCartPage=()=>{const c=document.getElementById('cartContent');if(!c)return;const t=cart.reduce((s,i)=>s+(i.price*i.quantity),0);c.innerHTML=`<div class="card">${cart.map(i=>`<div>${i.quantity} x ${i.name} - ₹${i.price*i.quantity}</div>`).join('')||'<p>Your cart is empty.</p>'}</div>${cart.length>0?`<div class="card"><b>Total: ₹${t}</b><br><br><button class="btn" onclick="placeOrder()">Place Order</button></div>`:''}`};

        const saveProfile=()=>{const p={name:document.getElementById('profileName').value,mobile:document.getElementById('profileMobile').value,address:document.getElementById('profileAddress').value};database.ref('userProfile').set(p).then(()=>alert('Profile Saved Successfully!'))};
        const addToCart=id=>{const i=cart.find(c=>c.id===id);const m=menuItems.find(x=>x.id===id);if(!m)return;if(i)i.quantity++;else cart.push({...m,quantity:1});updateCartCount();localStorage.setItem('cart',JSON.stringify(cart));alert(`${m.name} added!` )};
        const updateCartCount=()=>{document.querySelector('.cart-count').textContent=cart.reduce((s,i)=>s+i.quantity,0)};
        const placeOrder=()=>{if(!cart.length)return alert('Your cart is empty!');if(!userProfile.name||!userProfile.address)return alert('Please save your name and address in the Profile page first!');const id=`ORD${Date.now()}`;const order={id:id,items:cart,status:0,customerName:userProfile.name,customerAddress:userProfile.address};database.ref('orders/'+id).set(order).then(()=>{alert('Order Placed Successfully!');cart=[];localStorage.setItem('cart','[]');updateCartCount();showPage('ordersPage')})};

        document.querySelectorAll('.nav-item').forEach(i=>i.addEventListener('click',e=>{e.preventDefault();showPage(i.dataset.page)}));
        document.addEventListener('DOMContentLoaded',updateCartCount);
    </script>
</body>
</html>
